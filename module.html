<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Module</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-common"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <div class="container">
      <nav>
        <div
          id="module-back-link"
          style="
            cursor: pointer;
            display: flex;
            gap: 0.5rem;
            align-items: center;
            color: var(--text-secondary);
          "
        >
          <i data-lucide="chevron-left"></i> Dashboard
        </div>
        <span id="unit-counter" style="color: var(--text-secondary)"></span>
      </nav>

      <div
        class="flex gap-8"
        style="align-items: flex-start; padding-bottom: 4rem"
      >
        <aside
          class="glass-panel"
          style="
            width: 250px;
            padding: 1.5rem;
            display: none;
            @media (min-width: 768px) {
              display: block;
            }
          "
        >
          <h4 id="module-title-sidebar" <h4 id="module-title-sidebar">
            Module
          </h4>
          <div
            id="units-list"
            class="flex flex-col gap-2"
            style="margin-top: 1rem"
          ></div>
        </aside>

        <main style="flex: 1; max-width: 800px; margin: 0 auto">
          <div class="glass-panel animate-fade-in" style="padding: 3rem">
            <h1
              id="unit-title"
              style="
                margin-bottom: 2rem;
                border-bottom: 1px solid var(--border-glass);
                padding-bottom: 1rem;
              "
            >
              Loading...
            </h1>

            <!-- Tabs -->
            <div
              class="tabs flex gap-4"
              style="
                margin-bottom: 2rem;
                border-bottom: 1px solid var(--border-glass);
                padding-bottom: 1rem;
              "
            >
              <button
                id="tab-learn"
                class="tab-btn active"
                onclick="switchTab('learn')"
              >
                Learn
              </button>
              <button
                id="tab-visualize"
                class="tab-btn"
                onclick="switchTab('visualize')"
              >
                Visualize
              </button>
              <button
                id="tab-practice"
                class="tab-btn"
                onclick="switchTab('practice')"
              >
                Practice
              </button>
            </div>

            <!-- Views -->
            <div id="view-learn" class="tab-view" style="display: block">
              <div id="markdown-content"></div>
              <div id="playground-container" style="margin-top: 2rem"></div>
            </div>

            <div id="view-visualize" class="tab-view" style="display: none">
              <div
                class="glass-panel"
                style="
                  background: rgba(255, 255, 255, 0.02);
                  height: 500px;
                  padding: 0;
                  overflow: hidden;
                "
              >
                <svg id="markmap" style="width: 100%; height: 100%"></svg>
              </div>
            </div>

            <div id="view-practice" class="tab-view" style="display: none">
              <div id="qa-container"></div>
              <div
                id="quiz-container"
                style="
                  margin-top: 2rem;
                  padding: 1.5rem;
                  background: var(--bg-glass);
                  border-radius: var(--radius-md);
                  display: none;
                "
              >
                <div id="quiz-content"></div>
              </div>
            </div>
            <div
              class="flex justify-between items-center"
              style="margin-top: 4rem"
            >
              <button class="btn btn-secondary" disabled>Previous</button>
              <button id="next-btn" class="btn btn-primary">Next</button>
            </div>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
